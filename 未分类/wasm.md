## 理念

### 目标

WebAssembly 的目标：    

+ 快速、高效和可移植。wasm 代码能在不同的平台上以接近原生代码的速度执行。
+ 可阅读和可调试。wasm 虽然是一个低级汇编语言，但是是以一种人类可阅读的文本格式（具体的
格式仍然没有最终确定下来）存在的，人们可以编写、查看和调试。
+ 安全的。wasm 被指定在一个安全的沙盒环境中执行。与其他web代码相同，其遵守同源策略和其他权限政策。
+ Don't break the web — WebAssembly is designed so that it plays nicely with other web technologies and maintains backwards compatibility.       


### wasm 是如何在 web 平台中工作的

web 平台通常被认为有以下两部分：    

+ 一个用来运行 web 应用代码的虚拟机。
+ 一个Web 应用可以调用的，用来使用一些浏览器或设备能力的 Web APIs 的集合。       

通常来说，虚拟机只加载和执行 JS 代码，但随着 wasm 的出现，现在的虚拟机能够加载和执行
两种类型的代码——JS 和 WASM。      

两种不同类型的代码可以根据需要相互进行调用——WASM JS API 使用 JS 函数包装了导出的 WASM 代码，使其能正常的进行调用，WASM 也可以导出并且同步调用 JS 函数。事实上，WSAM代码的基本单元叫做一个模块，这个模块与 ES6 的模块语法有很多相同的地方。     

下面是一些理解 WASM 如何在浏览器中运行所需要的关键的概念：     

+ **模块**：代表了一个已被浏览器编译为可执行机器码的 wasm 二进制代码。一个模块是无状态的，像一个 Blob 一样，因此是可以被 window 和 worker 共享的。一个模块可以像 ES6 模块一样声明其导入的模块和导出的对象。
+ **内存**：一个可以被 WASM 底层内存访问指令读取和写入的，可调整大小的线性字节数组 ArrayBuffer。
+ **表格Table**：一个可调整大小的引用类型的数组，处于安全性和可移植性的原因，这个数组不能以原生字节存储在内存中。
+ **Instance**：一个模块以及与其在运行时使用的所有的配对的东西的状态，包括内存、表格和导入值的集合。一个 Instance 就像一个加载到一个特殊的全局环境中的 ES6 模块。       

