# CSS 权威指南   

<!-- TOC -->

- [CSS 权威指南](#css-权威指南)
    - [前言](#前言)
    - [第 1 章 CSS 和文档](#第-1-章-css-和文档)
        - [1.2 元素](#12-元素)
            - [1.2.1 置换元素和非置换元素](#121-置换元素和非置换元素)
        - [1.3 把 CSS 应用到 HTML 上](#13-把-css-应用到-html-上)
            - [1.3.1 link 标签](#131-link-标签)
        - [1.5 媒体查询](#15-媒体查询)
            - [1.5.1 用法](#151-用法)
        - [1.6 特性查询](#16-特性查询)
    - [第 2 章 选择符](#第-2-章-选择符)
        - [2.4 属性选择符](#24-属性选择符)
        - [2.6 伪类](#26-伪类)
            - [2.6.2 结构伪类](#262-结构伪类)
            - [2.6.3 动态伪类](#263-动态伪类)
            - [2.6.4 UI 状态伪类](#264-ui-状态伪类)
        - [2.7 伪元素选择符](#27-伪元素选择符)
    - [第 3 章 优先级和继承](#第-3-章-优先级和继承)
        - [3.2 继承](#32-继承)
    - [第 4 章 值和单位](#第-4-章-值和单位)
        - [4.1 关键字、字符串和其他文本值](#41-关键字字符串和其他文本值)
            - [4.1.1 关键字](#411-关键字)
            - [4.1.2 字符串](#412-字符串)
            - [4.1.3 URL](#413-url)
            - [4.1.4 图像](#414-图像)
        - [4.2 数字和百分数](#42-数字和百分数)
        - [4.3 距离](#43-距离)
            - [4.3.1 绝对长度单位](#431-绝对长度单位)
            - [4.3.2 分辨率单位](#432-分辨率单位)
            - [4.3.3 相对长度单位](#433-相对长度单位)
        - [4.4 计算值](#44-计算值)
        - [4.5 属性值](#45-属性值)
        - [4.6 颜色](#46-颜色)
            - [4.6.2 RGB 和 RGBa 颜色](#462-rgb-和-rgba-颜色)
            - [4.6.3 HSL 和 HSLa 颜色](#463-hsl-和-hsla-颜色)
        - [4.7 角度](#47-角度)
        - [4.8 时间和频率](#48-时间和频率)
        - [4.9 位置](#49-位置)
        - [4.10 自定义值](#410-自定义值)
    - [第 5 章 字体](#第-5-章-字体)
        - [5.1 字体族](#51-字体族)
        - [5.2 使用 @font-face](#52-使用-font-face)
        - [5.3 字重 font-weight](#53-字重-font-weight)
        - [5.4 字号 font-size](#54-字号-font-size)
        - [5.5 字形 font-style](#55-字形-font-style)
        - [5.6 字体拉伸 font-stretch](#56-字体拉伸-font-stretch)
        - [5.11 font 属性](#511-font-属性)
    - [第 6 章 文本属性](#第-6-章-文本属性)
        - [6.1 缩进和行内对齐](#61-缩进和行内对齐)
            - [6.1.1 缩进文本 text-indent](#611-缩进文本-text-indent)
            - [6.1.2 文本对齐 text-align](#612-文本对齐-text-align)
            - [6.1.3 对齐最后一行 text-align-last](#613-对齐最后一行-text-align-last)
        - [6.2 块级对齐](#62-块级对齐)
            - [6.2.1 行的高度 line-height](#621-行的高度-line-height)
            - [6.2.2 纵向对齐文本 vertical-align](#622-纵向对齐文本-vertical-align)
        - [6.4 文本转换 text-transform](#64-文本转换-text-transform)
        - [6.5 文本装饰 text-decoration](#65-文本装饰-text-decoration)
        - [6.8 处理空白 white-space](#68-处理空白-white-space)
        - [6.9 换行和断字](#69-换行和断字)
    - [第 7 章 视觉格式化基础](#第-7-章-视觉格式化基础)
        - [7.2 调整元素的显示方式](#72-调整元素的显示方式)
            - [7.2.13 自动调整高度](#7213-自动调整高度)
            - [7.2.15 负外边距和折叠](#7215-负外边距和折叠)
        - [7.3 行内元素](#73-行内元素)
            - [7.3.2 基本术语和概念](#732-基本术语和概念)
            - [7.3.4 行内非置换元素](#734-行内非置换元素)
            - [7.3.5 行内置换元素](#735-行内置换元素)
            - [7.3.6 行内块级元素](#736-行内块级元素)
    - [第 8 章 内边距、边框、轮廓和外边距](#第-8-章-内边距边框轮廓和外边距)
        - [8.2 内边距](#82-内边距)
            - [8.2.3 内边距的百分数值](#823-内边距的百分数值)
    - [第 9 章 颜色、背景和渐变](#第-9-章-颜色背景和渐变)
        - [9.2 背景](#92-背景)
            - [9.2.5 改变定位框](#925-改变定位框)
            - [9.2.7 背景粘附](#927-背景粘附)

<!-- /TOC -->

## 前言   

尖括号 `<>` 之间的斜体字表示值的类型，或者是引用其他属性的值。   

以等宽字体显示的值是关键字，必须原样编写，不能加引号。   

取值范围有多种组合方式：    

- 连在一起只由空格分开的两个或多个关键字，必须以给定的顺序使用。   
- 以竖线 `|` 分隔的值 `X | Y`，必取其中一个值，而且只能取一个。
- 两个竖线分隔的值 `X || Y` 表示即可以取其中一个值，也可以同时取两个值，但是顺序任意。   
- 两个 `&&` 连接的值 `X && Y` 表示同时取 X 和 Y，但是顺序任意。
- 方括号 `[...]` 用于分组。    

上面这些是组合方式，组合方式外就是修饰符了，各部分或方括号分组后面可以跟有下述修饰符中的一个：   

- 星号 `*` 表示前面的值或方括号分组可以重复零次或多次。   
- 加号 `+` 表示前面的值或方括号分组可以重复一次或多次。
- 井号 `#` 表示前面的值或方括号分组可以重复一次或多次，而且多次出现时要以逗号分隔。
- 问号 `?` 表示前面的值或方括号分组是可选的。
- 感叹号 `!` 前面的值或方括号分组是必须的。
- 花括号里的一对数 `{M, N}` 表示前面的值或方括号分组至少重复 M 次，最多重复 N 次    

## 第 1 章 CSS 和文档   

### 1.2 元素   

#### 1.2.1 置换元素和非置换元素    

置换元素指用来置换元素内容的部分不由文档内容直接表示。   

### 1.3 把 CSS 应用到 HTML 上   

#### 1.3.1 link 标签    

`<link rel="stylesheet" type="text/css" href="sheet1.css" media="all">`   

link 标签的作用是把其他文档和当前文档关联起来。rel 是 relation 的简称。   

### 1.5 媒体查询    

#### 1.5.1 用法    

媒体查询可以在下述几个地方使用。   

- link 元素的 media 属性
- style 元素的 media 属性
- @import 声明的媒体描述符部分
- @media 声明的媒体描述符部分    

多个媒体类型使用逗号分隔罗列。   

only 和 not 只能用在媒体查询的开头，only 专门用于保证向后兼容，在不支持媒体查询的浏览器中隐藏样式表。   

### 1.6 特性查询    

15-16 年间，CSS 新增了一个功能：根据用户代理是否支持特定的 CSS 属性及其值来应用一段样式，
这个功能称为特性查询。   

```css
@supports (color: black) {
    body { color: black; }
}
```   

如果用户代理不支持 `@supports`，整段样式都会跳过。   

特性查询可以嵌套，其实还可以嵌套在媒体查询中，而且反过来嵌套也可以。   

特性查询支持使用逻辑运算符。   

## 第 2 章 选择符    

### 2.4 属性选择符    

属性选择符大致可以分为四类：简单属性选择符、精准属性值选择符、部分匹配属性值选择符和起始值属性选择符。    

- 简单属性选择符：`h1[class] {color: sliver;}`。    
- 精准属性值选择符：`a[href="http://www.css-discuss.org/about.html"] {font-weight: bold;}`
- 部分匹配属性值选择符
    + `[foo|="bar"]`: foo 的属性值是 bar 后接一个破折号，或者就是 bar
    + `[foo~="bar"]`: 值为包含 bar 这个词的一组词
    + `[foo*="bar"]`: 其值包含 bar 子串
    + `[foo^="bar"]`: 以 bar 开头
    + `[foo$="bar"]`: 以 bar 结尾   

### 2.6 伪类    

#### 2.6.2 结构伪类  

`only-of-type` 选择子元素是父元素中唯一一个是这种类型的，父元素可以有多个子元素，但这种类型的
只能有这一个。   

`first-of-type` 选择子元素中这种类型的第一个元素。   

`nth-child` 中的代数式是这种形式 an + b 或 an - b，所以 b 是不能在第一位的，怪不得之前
有样式不生效。   

#### 2.6.3 动态伪类    

- `:link`: 具有 href 属性的 a
- `:visited`: 指代已访问过的链接     
- `:focus`
- `:hover`
- `:active`    

#### 2.6.4 UI 状态伪类    

- `:enabled`
- `:disabled`
- `:checked`
- `:indeterminate`
- `:default`
- `:valid`
- `:invalid`
- `:in-range`
- `:out-of-range`
- `:required`
- `:optional`
- `:read-write`
- `:read-only`    

### 2.7 伪元素选择符    

所有的伪元素选择符只能出现在选择符的最后。    

- `::first-letter`
- `::first-line`：这两个只能用在块级元素上
- `::before`
- `::after`    

## 第 3 章 优先级和继承   

### 3.2 继承   

继承的属性没有优先级，连零都没有：   

```html
* { color: gray; }
h1#page-title { color: black; }

<h1 id="page-title">Meerkat <em>Central</em></h1>
```    

Central 的字体色是 gray，继承来的 black 没有通用选择器指定的优先级高。   

## 第 4 章 值和单位   

### 4.1 关键字、字符串和其他文本值    

#### 4.1.1 关键字   

CSS3 定义了几个"全局"关键字，规范中的每个属性都能使用：inherit, initial, unset。    

unset 是 inherit 和 initial 的通用替身，对继承的属性来说，unset 的作用和 inherit 一样，
对不继承的属性来说，unset 的作用与 initial 一样。   

all 属性指接受这三个关键字，all 表示除 direction 和 unicode-bidi 之外的所有属性。   

#### 4.1.2 字符串    

字符串值指放在单引号或双引号内的任意字符序列，定义可取的值时以 `<string>` 表示。   

#### 4.1.3 URL    

在 CSS 中，相对 URL 相对于所在的样式表，而不是使用样式表的文档。例如，一个外部样式表中可能
导入其他样式表。如果使用相对 URL 导入那个样式表，URL 必须相对于当前样式表。    

#### 4.1.4 图像    

`<image>` 表示下面三种值中的一个：  

- `<url>`
- `<image-set>`
- `<gradient>`   

### 4.2 数字和百分数    

- `<integer>`
- `<number>`
- `<percentage>`
- 弹性值：是 `<number>` 后跟 fr，单位弹性值是 1fr    

### 4.3 距离   

长度单位分为两种：绝对长度单位和相对长度单位。    

#### 4.3.1 绝对长度单位    

- in: 英寸
- cm
- mm
- q: 四分之一毫米
- pt: 点
- pc: 1pc = 12pt
- px:     

#### 4.3.2 分辨率单位   

- dpi: 点每英寸，在长为 1 英寸的范围内能显示的点数。可以指打印机输出的点，也可以指 LED 屏幕等设备上的物理像素点，
或者电子墨水屏上的图像单元
- dpcm: 点每厘米
- dppx: 从 CSS3 起，1dppx 相当于 96dpi。     

#### 4.3.3 相对长度单位    

- em
- ex: 指所用字体中小写字母 x 的高度
- rem
- ch: CSS3 新单位，可以理解为一个字符，规范是这样定义的：等于渲染时所用字体中 0 字形的进距。
- vw
- vh
- vmin
- vmax    

### 4.4 计算值   

calc()    

### 4.5 属性值    

attr()    

### 4.6 颜色    

#### 4.6.2 RGB 和 RGBa 颜色   

`rgb(100%, 100%, 100%)`, `rgb(255, 255, 255)`，不过百分数和整数不能混用。   

不管使用哪种表示法，超出取值范围的数将 "裁剪" 为最近的边界值。例如，大于 100% 或小于
0% 的值将变成 100% 和 0%。    

#### 4.6.3 HSL 和 HSLa 颜色   

H 是角度值，取值范围是 0~360，S 是从 0（无饱和度）~100（完全饱和）的百分数，L
是从 0（全暗）~100（全明）的百分数。   

### 4.7 角度   

角度一般用 `<angle>` 表示，即一个 `<number>` 后跟下列四个单位中的一个：   

- deg: 度数，0~360
- grad: 百分度，完整的圆是 400 百分度
- rad: 弧度，完整的圆周是 2π
- turn: 圈数，一个完整的圆周是一圈    

### 4.8 时间和频率   

`<time>`    

### 4.9 位置    

`<position>`。如果声明两个值，而且第一个值是长度或百分数，那么前一个值始终是
横向值。如果给了两个横向值，则整个值都无效。   

如果声明了四个值，必须有两个长度或百分数，而且前面都得是关键字。此时，长度或百分数
指定偏移距离，而关键字定义偏移以哪一边计算。right 10px bottom 35px。    

### 4.10 自定义值    

```css
html {
    --base-color: #639;
    --highlight-color: #AEA;
}

h1 {
    color: var(--base-color);
}
h2 {
    color: var(--highlight-color);
}
```    

## 第 5 章 字体    

### 5.1 字体族

我们熟知的 "字体" 通常包含多个变体，分别针对粗体、斜体等。例如 Times 字体，还有
TimesRegular、TimesBold、TimesItalic、TimesBoldItalic 等变体。Times 其实是一个
字体族 font-family。   

为了覆盖所有情况，CSS 定义了五种通用字体族：   

- 衬线字体
- 无衬线字体
- 等宽字体
- 草书字体
- 奇幻字体    

`font-family: [<family-name> | <generic-family>]#`     

在 font-family 声明中，如果字体名称中有一个或多个空格，或者字体名称中有符号，
建议使用引号，注意是建议但不强制。不过，与 font-family 中可用的关键字同名的
字体名称必须放在引号里。   

### 5.2 使用 @font-face    

定义字体的全部参数都在 `@font-face {}` 结构中，这些参数称为描述符，必须的描述符
是 font-family 和 src，其他可选的有：   

- font-style: 区分常规、斜体和倾斜字型
- font-weight: 字重
- font-stretch: 字符宽度
- font-variant
- font-feature-settins: 直接访问 OpenType 的底层特性
- unicode-range    

### 5.3 字重 font-weight   

- 取值：`normal | bold | bolder | lighter | 100-900`   

这里讲一下规范中对一个属性都会描述哪些东西，通用的可能有这些：   

- 取值
- 初始值
- 计算值
- 适用于
- 百分数
- 继承性
- 备注
- 动画性    

CSS 规范只是说，每个数字对应的权重至少和前面的数字具有相同的字重。因此，100，200，300
和 400 可能对应于同样细的变体；500 和 600 对应于同样粗的变体。    

一般，400 对应于 normal，700 对应于 bold。    

如果把一个元素的字重设为 bolder，用户代理首先要确定从父元素继承的 font-weight 值是什么，
然后选择比继承的字重高一级的最小数字。   

### 5.4 字号 font-size   

- 取值：`xx-small | x-small | small | medium | large | x-large | xx-large | smaller | larger | <length> | <percentage>`   

前面那一串关键字的取值，都是相对的，且不同的浏览器给的换算比例可能还不一样。   

### 5.5 字形 font-style   

- 取值：`normal | italic | oblique`    

italic 斜体和 oblique 倾斜的区别在于，italic 是一种单独的字型，各字母的构造有些改动，体现外观上的不同。
而 oblique 则只是竖直体的倾斜版本。    

### 5.6 字体拉伸 font-stretch    

有些字体族中的变体可能具有较宽或较窄的字母型式。    

仅当使用的字体族中有宽体和窄体时，这个属性才起作用。    

### 5.11 font 属性     

- 取值：`[[<font-style> || [normal | small-caps] || <font-weight>]? <font-size> [/<line-height>]?<font-family>] | caption | icon | menu | message-box | small-caption | status-bar`    

得益于 font 属性相对宽松的写法。前三个属性值 font-style, font-weight, font-variant 的属性可以随意排列。
但是也只有这三个属性有这种自由。后两个值的顺序要严格的多，且必须出现，少一个整个规则都是无效的。    

## 第 6 章 文本属性    

文本和字体之间有什么区别呢？简单而言，文本是内容，而字体是用于显示内容的。借助文本属性，可以影响
文本相对一行中其他内容的位置，可以把文本设为上标，可以为文本添加下划线。    

### 6.1 缩进和行内对齐    

#### 6.1.1 缩进文本 text-indent   

- 取值：`<length> | <percentage>`
- 适用于：块级元素
- 百分数：相对于所在块级元素的宽度
- 继承性：是    

#### 6.1.2 文本对齐 text-align   

- 取值：`start | end | left | right | center | justify | match-parent | start end`    
- 适用于：块级元素    

#### 6.1.3 对齐最后一行 text-align-last   

有时，你可能想使用不同于其他内容的方式对齐元素的最后一行。例如，在两端对齐的文本块中，可能想左对齐
最后一行，或者把左对齐换成右对齐。此时可以使用 text-align-last

- 取值：`auto | start | end | left | right | center | justify`    

兼容性还是不错的，除了 safari。    

### 6.2 块级对齐    

#### 6.2.1 行的高度 line-height   

- 取值：`<number> | <length> | <percentage> | normal`
- 适用于：所有元素（不过请参考关于置换元素和块级元素的说明）
- 百分数：相对于元素的字号    

对块级元素而言，line-height 定义元素中文本行基线之间的最小距离。注意，定义的是最小
距离，不是定死的值，基线之间的距离可能比 line-height 的值大。line-height 不影响
置换元素的布局，但是依然应用到置换元素上。    

文本行的每个元素构成一个内容区 content area，其高度由字体的高度决定。随内容区出现的
是一个行内框 inline box，如果不考虑其他因素，其高度与内容区完全相等。line-height
导致的行距是影响行内框高度的因素之一。    

元素的行距等于line-height的计算结果减去font-size的计算结果。这个值是行距的总值。行距
分为两半，分别放到内容区的上部和下部。算上行距，得到的就是元素的行内框。   

确定一行内容的全部行内框之后，行框也就确定的，行框恰好包围最高那个行内框的顶端和最低
那个行内框的底端。    

使用纯数字时，继承的将是设定的换算系数，而不是计算得到的值。纯数字将应用到当前元素
及其所有子元素上，因此各元素的行高将根据自身的字号计算。     

#### 6.2.2 纵向对齐文本 vertical-align   

- 适用于：行内元素和单元格
- 百分数：相对元素的 line-height 值
- 备注：用在单元格时，只能取 baseline, top, middle, bottom    

取值：   

- baseline: 强制元素的基线与父元素的基线对齐。如果目标元素没有基线，例如图像、表单
输入框或其他置换元素，元素的底端与父元素的基线对齐
- sub, super: 将元素的基线低于/高于父元素的基线。 
- bottom: 把元素所在的行内框的底边与行框的底边对齐。
- middle: 把行内元素所在方框的中线与父元素基线向上偏于 0.5ex 处的线对齐
- 百分数：正数抬升元素    

### 6.4 文本转换 text-transform   

- 取值：`uppercase | lowercase | capitalize | none`    

### 6.5 文本装饰 text-decoration    

- 取值：`none | [ underline || overline || line-through || blink ]`   
- 继承性：否    

### 6.8 处理空白 white-space    

- 取值：`normal | nowrap | pre | pre-wrap | pre-line`   

影响对待单词之间及文本行之间空白的方式。   

- pre-wrap: 文本中的空白序列得以保留，但是文本行将正常换行。
- pre-line: 和 pre-wrap 相反，空白序列将像常规文本中那样折叠，但是保留换行。    

制表符宽度 tab-size:   

- 取值: `<length> | <integer>`
- 初始值: 8     

### 6.9 换行和断字    

**word-break**    

控制不同语言处理文本软换行的方式，如果一串文本太长，一行放不下，就会软换行。这里其实
说的很明确，这个属性是处理文本内容换行的。   

- 取值：`normal | break-all | keep-all`    

normal 的意思是，按照正常方式换行。就是文本在单词之间换行，不过不同语言的"单词"的定义不同，
拉丁语系中，几乎始终在字母序列之间的空格处换行。在象形文字中，例如日语，一个字符就是一个词，
因此任何两个字符之间都可能换行，然而，在其他 CJK 语言中，软换行可能只会出现在不以空格分隔
的字符序列之间。    

break-all 的话，软换行可能出现在任何字符之间，即使在一个词的内部。不过需要注意的是，
line-break 属性可能会影响 CJK 文本应用的 break-all 行为。话说对于 CJK 语言来说，
天生感觉就是 break-all 的。    

keep-all 禁止在字符之间软换行，即便这样可能导致文本行超过所在元素的长度。    

**line-break**    

- 取值：`auto | loose | normal | strict`
- 初始值：auto    

line-break 会影响 CJK 的软换行方式，尤其是如何处理 CJK 符号两侧的换行，以及 CJK 文本
中非 CJK 标点符号（例如感叹号、连字符和省略号）两侧的换行方式。   

然而具体几个值是什么表现，书上并没有说。。。。    

**overflow-wrap(原 word-wrap)**    

- 取值：`normal | break-word`    

还是没说明换行这里。。。。    

## 第 7 章 视觉格式化基础   

### 7.2 调整元素的显示方式    

七个横向属性之和始终等于父元素的 width。    

#### 7.2.13 自动调整高度    

默认的块级元素的高度是从最上边那个块级子代元素的上边框外侧到最下边那个块级元素的下边框外侧
之间的距离。因此，子元素的外边距 "游离" 在所属元素的外部。    

然而，如果块级元素有上内边距或下内边距，或者有上边框或下边框，那么其高度是从最上边那个子元素
的上外边距的外边界到最下边那个子元素的下外边距的外边界之间的距离。    

#### 7.2.15 负外边距和折叠    

横向的负外边距会修改元素的宽度，但是纵向的不会，纵向的负外边距会修改元素的位置，及后面常规流
内每个元素的位置。   

### 7.3 行内元素     

#### 7.3.2 基本术语和概念    

非置换行内元素的内边距、边框和外边距在对应的方框上没有纵向效果，即对行内框（及元素所在的行框）的高度没有影响。   

#### 7.3.4 行内非置换元素    

内边距、外边距和边框都可以应用到行内非置换元素上，但是行内元素的这些属性不影响行框的总体高度，
边框的边界由 font-size 控制，而不受 line-height 影响。也就是说，如果 span 元素的 font-size
为 12px，line-height 为 36px，那么内容区高度 12px，而边框在内容区的周围。   

#### 7.3.5 行内置换元素    

自身有高度的置换元素可能导致行框比正常情况下高。但这不影响行中任何元素的行高，包括置换元素本身，
行框的高度将正好容纳置换元素及其盒模型属性设定的值。也就是说，置换元素的行框包含整个元素，
包括内容、外边距、边框和内边距。  

#### 7.3.6 行内块级元素    

行内块级元素与其他元素的和内容的关系按照行内框处理。也就是说，它在一行中的布局方式跟图像一样。实际上，
行内块级元素是当做置换元素进行格式化的。这意味着，行内块级元素的底边默认是和文本行的基线对齐的，而且
内部不会断行。    

## 第 8 章 内边距、边框、轮廓和外边距   

### 8.2 内边距   

#### 8.2.3 内边距的百分数值    

正常流动模式下的多数元素，其高度恰好容纳后代元素的内容及其内边距。如果元素的上下内边距相对父元素的高度计算，为了容纳
上下内边距，父元素的高度要增加，而高度变化后，上下内边距的值又要随之变化，如此一直下去，进入循环了。    

所以总结一下，对于行内非置换元素来说，width,height 是不适用的，padding, border, margin 都是适用的，但是呢
纵向上这些东西不会影响行框布局。

## 第 9 章 颜色、背景和渐变    

### 9.2 背景

#### 9.2.5 改变定位框    

background-origin 属性确定计算源图像的位置时以什么的边界为基准，定义的是背景定位区域，background-clip 定义的是
背景绘制区域。    

#### 9.2.7 背景粘附   

background-attachment: [scroll | fixed | local]#    

fixed 图像不随文档一起滚动，且图像位置由视区的尺寸决定。    

local 与 fixed 相反，图随内容一起滚动。    