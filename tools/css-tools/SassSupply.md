# Sass

目录：   

+ [使用](#usage)
  - 缓存
  - 注释
+ [SassScript](#sassscript)
  - 交互式shell
  - 变量
  - 运算
  - 圆括号
  - 插值

## 使用

### 缓存

默认情况下，Sass 会自动缓存编译后的模板（template）与 partials，这样做能够显著提升重新编译的速度，
在处理 Sass 模板被切割为多个文件并通过 `@import` 导入，形成一个大文件时效果尤其显著。

如果不使用框架的情况下，Sass 将会把缓存的模板放入当前工作目录中的 .sass-cache 目录。
可以使用命令行的 `--cache-location PATH` 定义这个目录的位置，注意是直接指定一个目录的位置，
不是说在指定的位置中再放一个 `.sass-cache` 目录。 如果你不希望 Sass 启用缓存功能，
可以指定一个 `--no-cache` 命令行参数。   

### 注释

注意多行注释的一个字母是 `!` 的话，那么注释总是会被保留到输出的CSS中，即使在压缩输出模式下。
这可用于在你生成的CSS中添加版权声明。也就是说在 `compressed` 格式下，多行注释也是删除了的，
注意这个 `!` 必须紧跟在 `/*` 后面，中间都不能有空格。       

使用插值语句 (interpolation) ，可以将变量值输出到多行注释中，例如：   

```scss
$version: "1.2.3";
    /* This CSS is generated by My Snazzy Framework version #{$version}. */
```   

编译为：   

```css
/* This CSS is generated by My Snazzy Framework version 1.2.3. */
```    

## SassScript

除了普通的CSS属性的语法，Sass 支持一些扩展，名为SassScript。SassScript允许属性使用变量，
算术和额外功能。SassScript可以在任何属性值被使用。    

### 交互式 shell

加 `-i` 或者 `--interactive` 命令行选项: `sass -i`。    

### 变量

变量以美元符号开始，赋值像设置CSS属性那样：   

`$width: 5em;`    

变量仅在它定义的选择器嵌套层级的范围内可用。不在任何嵌套选择器内定义的变量则在可任何地方
使用。定义变量的时候可以后面带上 `!global` 标志，在这种情况下，变量在任何地方可见:    

```scss
#main {
  $width: 5em !global;
      width: $width;
}

#sidebar {
  width: $width;
}
```   

编译为：   

```css
#main {
  width: 5em;
}

#sidebar {
  width: 5em;
}
```   

由于历史原因，变量名（以及其他所有Sass标识符）可以互换连字符和下划线。      

需要注意的是这里变量在属性值中单独使用，以及下面所说的变量的类型及运算，应该都指的是作为
属性值的运算，`#{}` 插值语法则是指在非属性值的地方进行表达式的计算。     

### 数据类型   

SassScript 支持 7 种主要的数据类型：   

+ 数字 (例如： `1.2`, `13`, `10px`)
+ 文本字符串，带引号字符串和不带引号字符串(例如：`"foo"`, `'bar'`, `baz`)
+ 颜色 (例如：`blue`, `#04a3f9`, `rgba(255, 0, 0, 0.5)`)
+ 布尔值 (例如： `true`, `false`)
+ 空值 (例如： `null`)
+ 值列表 (list)，用空格或逗号分隔 (例如： `1.5em 1em 0 2em`, `Helvetica, Arial, sans-serif`)
+ maps ，从一个值映射到另一个 (例如： `(key1: value1, key2: value2)`)

#### 字符串

CSS指定两种字符串类型：带引号的字符串，如 `"Lucida Grande"` 或者 `'http://sass-lang.com'`，
还有不带引号的字符串，如 `sans-serif` 或者 `bold`。SassScript 识别这两种类型，并且一般来说，
在编译输出的CSS文件中不会改变Sass文档中使用的字符串类型。也就是说原本 Sass 文件中的字符串带
引号，那编译出来也带引号。原本不带，编译出来的也不带。    

有一个例外，当使用 `#{}` 插值时，带引号的字符串将被编译为不带引号的字符串，这样主要是为了便于
使用，比如mixins中的选择器名称。例如：   

```scss
@mixin firefox-message($selector) {
      body.firefox #{$selector}:before {
    content: "Hi, Firefox users!";
  }
}

@include firefox-message(".header");
```    

编译为：   

```css
body.firefox .header:before {
  content: "Hi, Firefox users!"; }
```    

#### 列表

列表(lists) 是指 Sass 如何表示在CSS声明的，类似`margin: 10px 15px 0 0` 或 `font-face: Helvetica, Arial, sans-serif`
这样的值，列表只是一串其他值，无论是用空格还是用逗号隔开。事实上，独立的值也被视为列表：只包含一个值的列表。   

列表本身没有太多的功能，但 Sass list functions 赋予了数组更多新功能：nth 函数可以直接访问数组中的某一项；
join 函数可以将多个数组连接在一起；append 函数可以在数组中添加新值；而 `@each` 指令能够遍历数组中的每一项。    

除了包含简单的值，列表可包含其他列表。例如，`1px 2px, 5px 6px`包含 `1px 2px`列表和 `5px 6px`
列表两个项。如果内外两层列表使用相同的分隔符号，你需要使用括号将内层列表括起来，以明确内层类别的开始和结束位置。
例如，`(1px 2px) (5px 6px) `同样是包含`1px 2px`列表和`5px 6px`列表两个项的列表。不同的是，该列表层外用空格分隔，之前列表外层是用逗号分隔。   

#### Maps

Maps代表一个键和值对集合，其中键用于查找值。他们可以很容易地将值收集到命名组中，并且可以动态地访问这些组。
在CSS中你找不到和他们类似的值，虽然他们的语法类似于媒体查询表达式：    

`$map: (key1: value1, key2: value2, key3: value3);`     

和列表（Lists）不同，Maps必须始终使用括号括起来，并且必须用逗号分隔。Maps中的键和值可以是任意的SassScript对象。
一个Maps可能只有一个值与给定的键关联（尽管该值可以是一个列表）。一个给定的值可能与许多键关联。   

和列表（Lists）类似，Maps的主要操作使用的是 SassScript 函数。map-get函数用于查找map中的值，
map-merge函数用于添加值到map中的值， `@each` 指令可以用来为 map 中的每个键值对添加样式。
map中键值对的顺序和map创建时始终相同。    

Maps还可以用于任何列表（Lists）能做的事情。当用于一个列表函数时，map被视为键值对列表。
例如，`(key1: value1, key2: value2)`被用于列表函数时，将被视为嵌套列表`key1 value1, key2 value2`。
列表不能被视为maps，不过，空列表除外。 `()` 表示一个键/值对都没有的map,也可以被视为一个没有元素的列表。    

#### 颜色

任何CSS颜色表达式返回SassScript颜色值。这其中包括了大量的命名的颜色，这些名字字符串不区别带不带引号。    

### 运算

所有数据类型的支持相等运算(`==` 和 `!=`)。此外，每种类型都有其自己特殊的运算方式。    

#### 数字运算

SassScript 支持对数字标准的算术运算（加法`+`，减法 `-` ，乘法`*`，除法 `/` 和取模 `% `）。
Sass 数学函数在算术运算期间会保留单位。这意味着，就像在现实生活中，你不能用不相同的单位数字
进行算术运算（比如数字后面添加了 `px`和 `em` 单位），还有两个单位相同的数字相乘将产生单位平方
(`10px * 10px == 100px * px`)。要知道，`px * px`是无效的CSS单位，Sass会抛出一个错误，因为你试图在CSS中使用无效的单位。     

数字支持关系运算符(`<, >, <=, >=`)    

##### 除法 /  

CSS允许 / 出现在属性值之间作为分隔数字的方式。由于SassScript是CSS属性语法的扩展，所以它必须支持这一点，
同时还允许 / 用于除法。这意味着，在默认情况下，在SassScript中如果两个数字由 / 分隔，在返回的CSS中将以同样的方式出现。    


但是，这里有将/解析为除法三种情况。这些涵盖了绝大多数当做除法的案例。 他们是：   

1. 如果该值，或值的任何部分，存储在一个变量中或通过函数返回。
2. 如果该值是由括号括起来的，除非这些括号是在一个列表（list）外部，并且值是括号内部。
3. 如果该值被用作另一个算术表达式的一部分。    

```scss
p {
  font: 10px/8px;             // 原生的CSS，不作为除法
  $width: 1000px;
      width: $width/2;            // 使用了变量, 作为除法
  width: round(1.5)/2;        // 使用了函数, 作为除法
  height: (500px/2);          // 使用了括号, 作为除法
  margin-left: 5px + 8px/2px; // 使用了 +, 作为除法
  font: (italic bold 10px/8px); // 在一个列表（list）中，括号可以被忽略。
}
```   

如果你想纯CSS 的/ 和变量一起使用（即/不作为除法使用），你可以使用 `#{}` 插入他们。例如：   

```scss
p {
  $font-size: 12px;
      $line-height: 30px;
  font: #{$font-size}/#{$line-height};
}
```    

#### 颜色运算

所有算术运算都支持的颜色值，颜色值的运算是分段进行计算的，也就是，依次计算红（red），绿（green），以及蓝（blue）的成分值。例如   

```scss
p {
  color: #010203 + #040506;
}
```   

计算 `01 + 04 = 05`, `02 + 05 = 07`, 和 `03 + 06 = 09`，并且编译为：`#050709`   

数字和颜色值之间的算术运算也是分段。    

需要注意的是，包含alpha通道（那些由rgba或hsla函数创建的）的颜色必须具有相同的alpha值，才能进行颜色运算。    

#### 字符串运算

`+` 运算可用于连接字符串。    

请注意，如果带引号的字符串被添加到不带引号的字符串中（也就是说，带引号的字符串在 + 的左侧），
那么返回的结果是带引号的字符串。同样，如果一个不带引号的字符串添加到带引号的字符串
中（不带引号的字符串在 + 的左侧）那么返回的结果是一个不带引号的字符串。 例如：    

```scss
p:before {
  content: "Foo " + Bar;
  font-family: sans- + "serif";
}
```  

编译为:    

```css
p:before {
  content: "Foo Bar";
  font-family: sans-serif; }
```   

在文本字符串中，`#{} ` 式插值可以用来在字符串中放置动态值，Null值被视为空字符串：   

```scss
p:before {
  content: "I ate #{5 + 10} pies!";
}
```   

编译为：    

```css
p:before {
  content: "I ate 15 pies!"; }
```    


#### 布尔运算

SassScript 支持布尔值的 `and`, `or`, 和 `not` 运算。    

#### 列表运算

列表不支持任何特殊运算，只能使用 list 函数 控制。    

### 圆括号   

圆括号可以用来影响运算的顺序。    

### 插值  

还可以通过 `#{}` 插值语法在选择器和属性名中使用 SassScript 变量:   

```scss
$name: foo;
$attr: border;
p.#{$name} {
  #{$attr}-color: blue;
}
```   

编译为：   

```css
p.foo {
  border-color: blue; }
```    
