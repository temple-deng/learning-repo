# 第 1 章 引言

数据库管理系统是一个由互相关联的数据的集合和一组用以访问这些数据的程序组成。这个数据集合通常称作数据库。     

## 1.3 数据视图

数据库系统的一个主要目的是给用户提供数据的抽象视图，也就是说，系统隐藏关于系统存储和维护的某些细节。    

所以，数据库是一个用来管理数据的工具，而为了方便我们管理，数据库提供了数据的抽象视图。    

### 1.3.1 数据抽象

数据库系统开发人员通过如下几个层次上的抽象来对用户屏蔽复杂性，以简化用户和系统的交互：    

+ **物理层**。描述数据实际上是怎样存储的，即复杂的底层数据结构。
+ **逻辑层**。描述数据库中存储什么数据及这些数据间存在什么关系。
+ **视图层**。只描述整个数据库的某个部分。    

### 1.3.2 实例和模式    

特定时刻存储在数据库中的信息的集合称作数据库的一个**实例**。而数据库的总体设计称作数据库**模式**。      

### 1.3.3 数据模型

数据库结构的基础是**数据模型**。数据模型是一个描述数据、数据联系、数据语义以及一致性约束
的概念工具的集合。数据模型提供了一种描述物理层、逻辑层以及视图层数据库设计的方式。      

也就是说，实际来使用一个数据库的时候，是基于数据模型的，比如说关系型数据库都是基于关系模型实现的，
而设计数据库的时候是使用 E-R 模型设计的。    

数据模型可被划分为四类：    

+ 关系模型。关系模型用表的集合来表示数据和数据间的联系。每个表有多个列，每列有唯一的列名。
关系模型是基于记录的模型的一种。基于记录的模型的名称的由来是因为数据库是由若干种固定格式的记录
来构成的。每个表包含某种特定类型的记录。每个记录类型定义了固定数目的字段。表的列对应于记录类型
的属性。      
+ 实体 - 联系模型。E-R模型基于对现实世界的这样一种认识：现实世界由一组称作实体的基本对象以及
这些对象间的联系构成。实体-联系模型广泛应用于数据库设计。也就是说用 E-R 模型设计，然后基于
关系模型实现。
+ 基于对象的数据模型。可以看成是 E-R模型增加了封装、方法和对象标识等概念后的扩展。
+ 半结构化数据模型。允许那些相同类型的数据项含有不同的属性集的数据定义。XML 被广泛地用来表示
半结构化数据。     

## 1.4 数据库语言

数据库系统使用**数据定义语言**来定义数据库模式，以及**数据操纵语言**来表达数据库的查询和更新。
它们简单地构成了单一的数据库语言（例如SQL)的不同部分。      

### 1.4.1 数据操纵语言

数据操纵语言 DML 使得用户可以访问或操纵那些按照某种适当的数据模型组织起来的数据。有以下访问
类型：     

+ 对存储在数据库中信息进行检索。
+ 向数据库中插入新的信息。
+ 从数据库中删除信息。
+ 更新数据库中存储的信息。      

### 1.4.2 数据定义语言

数据库模式是通过一系列定义来说明的，这些定义由一种称作数据定义语言 DDL 的特殊语言来表达。     

存储在数据库中的数据值必须满足某些一致性约束。DDL 语言提供了指定这种约束的工具。每当数据库被更新
时，数据库系统都会检查这些约束。通常，约束可以是关于数据库的任意微词。然而，如果要测试任意
谓词，可能代价比较高。因此，数据库系统实现可以以最小代价测试的完整性约束。     

+ **域约束**。每个属性必须对应于一个所有可能的取值构成的域（例如整数型、字符型、日期型）。
+ **参照完整性**。我们常常希望，一个关系中给定属性集上的取值也在另一关系的某一属性集中的取值
中出现。
+ **断言**。一个断言就是数据库需要时刻满足的某一条件。域约束和参照完整性约束是断言的特殊形式。
然而，还有许多约束不能仅用这几种特殊形式表达。   
+ **授权**。我们也许相对用户加以区别，对于不同的用户在数据库中的不同的数据值上允许不同的访问
类型。这些区别以授权来表达，最常见的是：读权限、插入权限、更新权限和删除权限。     

断言和授权还不是很清楚是怎么实施的。       

DDL 以一些指令作为输入，生成一些输出。DDL 的输出放在**数据字典**中，数据字典包含了**元数据**。
可把数据字典看做一种特殊的表，这种表只能由数据库系统本身来访问和修改。      


## 1.5 关系数据库

### 1.5.4 来自应用程序的数据库访问

为了访问数据库，DML 语言需要由宿主语言来执行。由两种途径可以做到这一点：    

+ 一种是通过提供 API，它可以用来将 DML 和 DDL 语句发送给数据库，再取回结果。与 C 语言一起使用
的开放数据库连接（ODBC)标准，是一种常用的 API 接口标准。Java 数据库连接（JDBC)标准为 Java
语言提供了相应的特性。
+ 另一种是通过扩展宿主语言的语法，在宿主语言的程序中嵌入 DML 调用，通常用一个特殊字符作为 DML
调用的开始，并且通过预处理器，称为DML预编译器，来将 DML 语言转变成宿主语言中过程调用。      

## 1.6 数据库设计

### 1.6.4 规范化

设计关系数据库所用到的另一种方法是通常被称为规范化的过程。它的目标是生成一个关系模式集合，使我们存储信息
时没有不必要的冗余，同时又能很容易地检索数据。这种方法是设计一种符合适当的范式的模式，为确定
一个关系模式是否符合想要的范式，我们需要额外的关于用数据库建模的现实世界中机构的信息。最常用
的方法是使用**函数依赖**。      

## 1.7 数据存储和查询

数据库系统划分为不同的模块，每个模块完成整个系统的一个功能。数据库系统的功能部件大致可分为存储管理器和查询处理部件。     


### 1.7.1 存储管理器

存储管理器负责与文件管理器进行交互。原始数据通过操作系统提供的文件系统存储在磁盘上。存储管理器
将各种 DML 语句翻译为底层文件系统命令。因此，存储管理器负责数据库中数据的存储、检索和更新。    

存储管理部件包括：    

+ **权限及完整性管理器**，它检测是否满足完整性约束（什么是完整性约束），并检查试图访问数据的用户的
权限。
+ **事务管理器**，它保证即使发生了故障，数据库也保持在一致的状态，并保证并发事务的执行不发生冲突。
+ **文件管理器**，它管理磁盘存储空间的分配，管理用于用于表示磁盘上所存储信息的数据结构。
+ **缓冲区管理器**，它负责将数据从磁盘上取到内存中来，并决定哪些数据应被缓冲存储在内存中。    

存储管理器实现了几种数据结构，作为系统物理实现的一部分：    

+ **数据文件**，存储数据库自身。
+ **数据字典**，存储关于数据库结构的元数据，尤其是数据库模式。
+ **索引**，提供对数据项的快速访问。    


### 1.7.2 查询处理器

查询处理器组件包括：    

+ **DDL 解释器**，它解释 DDL 语句并将这些定义记录在数据字典中。
+ **DML 编译器**，将查询语言中的 DML 语句翻译为一个执行方案，包括一系列查询执行引擎能理解的低级
指令。一个查询通常可被翻译为多种等价的具有相同结果的执行方案的一种。DML 编译器还进行 **查询优化**，
也就是从几种选择中选出代价最小的一种。
+ **查询执行引擎**，执行由DML 编译器产生的低级指令。       

