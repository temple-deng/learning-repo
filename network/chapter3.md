# 第 3 章 传输层

## 3.1 概述和传输层服务

传输层协议为运行在不同端系统上的应用程序提供了逻辑通信功能。从应用程序的角度来看，通过逻辑通信，运行不同进程的主机好像直接相连一样，实际上这些主机可能通过很多路由器及多种不同类型的链路相连。应用程序使用传输层提供的逻辑通信功能彼此发送报文，而无需考虑承载这些报文的物理基础设施的细节。    

传输层协议是在端系统而不是路由器中实现的。在发送端，传输层将从发送应用程序进程接收到的报文转换成传输层分组，用因特网术语来讲该分组称为传输层报文段。在发送端系统中，传输层将这些报文段传递给网络层，网络层将其封装成网络层分组并向目的地发送。网络路由器仅作用于该数据报的网络层字段，不会检查封装在数据报中的传输层报文段。    

UDP 和 TCP 最基本的责任是，将两个端系统间 IP 的交付服务扩展为运行在端系统上的两个进程的交付服务。将主机间交付扩展到进程间交付被称为传输层的多路复用与多路分解。     

## 3.2 多路复用和多路分解

考虑一下主机怎样将一个到达的传输层报文段定向到适当的套接字。为此目的，每个传输层报文段中具有几个字段。在接收端，传输层将检查这些字段，标识出接收套接字，进而将报文段定向到该套接字。将传输层报文端中的数据交付到正确的套接字的工作称为多路分解。在源主机从不同套接字中收集数据块，并为每个数据块封装上首部信息从而生成报文段，然后将报文段传递到网络层，这些工作叫做多路复用。